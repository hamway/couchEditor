{"_id":"_design/groups","_rev":"21-096fe9917ddb449bf99993e2fd57e7b1","language":"javascript","views":{"all":{"map":"function(doc){ if (doc.source == 'vk') {emit(doc.time, doc);}}"},"shows_by_time":{"map":"function(doc){ \n\tif (doc.document_postnet.vk && doc.document_postnet.vk.length > 0) {\n\t\temit(doc.document_published, {user_id:doc.user_id,city:doc.document_postnet.city});\n\t}\n}"},"enters_by_time":{"map":"function(doc){ \n\tif (doc.type == 'enter' && doc.source == 'vk') {\n\t\temit(doc.time, {user_id:doc.user_id,group:doc.group, isFirst:doc.isFirst});\n\t}\n}"},"newreg_by_time":{"map":"function(doc){ \n\tif (doc.type == 'register' && doc.reg_ip) {\n\t\temit(doc.reg_time, {city:doc.city.id});\n\t}\n}"},"entersUser_by_time":{"map":"function(doc){ \n\tif (doc.type == 'enter' && doc.source == 'vk' && doc.user_id) {\n\t\temit(doc.time, {user_id:doc.user_id,group:doc.group, isFirst:doc.isFirst});\n\t}\n}"},"rejectUser_by_time":{"map":"function(doc){ \n\tif (doc.type == 'enter' && doc.source == 'vk' && !doc.user_id) {\n\t\temit(doc.time, {user_id:doc.user_id,group:doc.group, isFirst:doc.isFirst});\n\t}\n}"},"secondEnters_by_time":{"map":"function(doc){ \n\tif (doc.type == 'enter' && doc.source == 'vk' && doc.group && doc.user_id) {\n\t\temit(doc.time, {user_id:doc.user_id,group:doc.group, isFirst:doc.isFirst});\n\t}\n}"},"realWork_by_time":{"map":"function(doc) { \n\tif ((doc.type != 'document' && doc.document_source != 'selfhander') || doc.user_hash) return; \n\temit(doc.document_published, {title:doc.document_title, user:doc.user_hash});\n\tif (doc.user_hash) {\n\t\temit(['author', doc.id], {_id:doc.user});\n\t}\n}"},"realWorkDeleted_by_time":{"map":"function(doc) { \n\tif (doc.type == 'document' && doc.document_source == 'selfhander' && doc.isDelete && doc.user_hash) { \n\temit(doc.document_published, {title:doc.document_title, user:doc.user_hash, raw:doc});\n\tif (doc.user_hash) {\n\t\temit(['author', doc.id], {_id:doc.user});\n\t}\n\t}\n}"},"takeWork_by_time":{"map":"function(doc) { \n\tif (doc.type == 'action' && doc.action == 'responserecieved' && doc.user_hash ) { \n\temit(doc.time, {action:doc.action,user:doc.from_userid});\n\tif(doc.user_hash) {\n\t\temit('author', \t{_id:doc.user_hash});\n\t}\n\t}\n}"},"selectWork_by_time":{"map":"function(doc) { \n\tif (doc.type == 'action' && doc.action == 'shselected' && doc.user_hash ) { \n\temit(doc.time, {action:doc.action,user:doc.from_userid});\n\tif(doc.user_hash) {\n\t\temit('author', \t{_id:doc.user_hash});\n\t}\n\t}\n}"},"acceptWork_by_time":{"map":"function(doc) { \n\tif (doc.type == 'action' && doc.action == 'shaccepted' && doc.user_hash ) { \n\temit(doc.time, {action:doc.action,user:doc.from_userid});\n\tif(doc.user_hash) {\n\t\temit('author', \t{_id:doc.user_hash});\n\t}\n\t}\n}"},"rateWork_by_time":{"map":"function(doc) { \n\tif (doc.type == 'action' && doc.action == 'ratejob' && doc.user_hash ) { \n\temit(doc.time, {action:doc.action,user:doc.from_userid});\n\tif(doc.user_hash) {\n\t\temit('author', \t{_id:doc.user_hash});\n\t}\n\t}\n}"},"likeWork_by_time":{"map":"function(doc) { \n\tif (doc.type == 'action' && doc.action == 'selfhanderlikeyou' && doc.user_hash ) { \n\temit(doc.time, {action:doc.action,user:doc.from_userid});\n\tif(doc.user_hash) {\n\t\temit('author', \t{_id:doc.user_hash});\n\t}\n\t}\n}"}}}